import{r as k,s as v,u as S,a as p,m as T,e as s,n as A,d as _,o as $,c as d,w as b,b as r,f as m,j as C,g as h}from"./index-BZhkuRv_.js";import{s as j,T as l}from"./index-R18N4lAn.js";const e=k({changeShare:!0,deleteAll:!0,create:!0,update:!0,delete:!0,trash:!0,move:!0}),y=()=>{const{socketTask:t,socketProject:n}=v(),{getProjectId:u}=S(),a=`broadcast:${u.value}`,{initPermissions:c}=p(),f=T(),o=j(),g=A();return s.on("project/change-share",()=>e.changeShare=!1),s.on("task/delete-all",()=>e.deleteAll=!1),s.on("task/update",()=>e.update=!1),s.on("task/create",()=>e.create=!1),s.on("task/delete",()=>e.delete=!1),s.on("task/trash",()=>e.trash=!1),s.on("task/move",()=>e.move=!1),t.value.on(`${a}/create`,()=>{setTimeout(()=>e.create=!0,300),e.create&&o.getAll()}),t.value.on(`${a}/update`,()=>{console.log("uyuy"),setTimeout(()=>e.update=!0,300),e.update&&o.getAll()}),t.value.on(`${a}/trash`,()=>{setTimeout(()=>e.trash=!0,300),e.trash&&o.getAll()}),t.value.on(`${a}/change-position`,()=>{setTimeout(()=>e.move=!0,300),e.move&&o.getAll()}),t.value.on(`${a}/delete`,()=>{setTimeout(()=>e.delete=!0,300),e.delete&&o.getAll()}),t.value.on(`${a}/delete-all`,()=>{setTimeout(()=>e.deleteAll=!0,300),e.deleteAll&&o.getAll()}),n.value.on(`${a}/change-share`,i=>{setTimeout(()=>e.changeShare=!0,300),e.changeShare&&(f.project=i,c(),g.meta.type=i.share.public.status?"public":"private")}),t},x=_({__name:"ShareTasksPage",setup(t){const{initPermissions:n,isOwner:u}=p();return y(),$(()=>{n()}),(a,c)=>(m(),d(r(l).Content,null,{default:b(()=>[r(u)?(m(),d(r(l).MenuShare,{key:0})):C("",!0),h(r(l).Options),h(r(l).List)]),_:1}))}});export{x as default};
