import{d as C,j as F,r as S,c as V,v as I,h as g,k as x,l as e,m as y,n as P,t as $,g as r,p as M,q as U,x as B,f as j,I as E,y as z,i as k,F as A,z as N,A as D,B as T}from"./index-42a38fae.js";const Y={class:"content-profile"},q=e("h1",{class:"font-bold text-xl mb-2"},"Change Password",-1),L={class:"box-field"},R=e("label",{for:"current_pass"},"Current Password",-1),G={class:"input-error"},H={class:"box-field"},J=e("label",{for:"new_pass"},"New Password",-1),K={class:"input-error"},O={class:"box-field"},Q=e("label",{for:"verifyNewPass"},"Verify password",-1),W={class:"input-error"},X={class:"box-field mt-3"},Z=["disabled"],ee=C({__name:"FormProfilePass",setup(h){const d=M(),{user:i,changePassword:_}=F(),l=S({current:"",verify:"",new:""}),s=V(()=>!!(l.current.length&&l.new.length&&l.verify.length)),{check:v,errors:f,setError:w}=I({current:["empty","min:8"],verify:["empty","min:8"],new:["empty","min:8"]}),u={message:"The new password is different to verification",field:"verify"},a=()=>{var o;v(l).value&&(l.verify!=l.new?w(u):_({currentPassword:l.current,_id:String((o=i.value)==null?void 0:o._id),newPassword:l.new},{actions:t=>d.success(String(t==null?void 0:t.message)),error:t=>d.error(t.message)}))};return(p,o)=>{var t,n,c;return g(),x("div",Y,[q,e("div",L,[R,y(e("input",{id:"current_pass","onUpdate:modelValue":o[0]||(o[0]=m=>l.current=m),placeholder:"••••••••",type:"password",class:"input"},null,512),[[P,l.current,void 0,{trim:!0}]]),e("p",G,$((t=r(f))==null?void 0:t.current),1)]),e("div",H,[J,y(e("input",{id:"new_pass","onUpdate:modelValue":o[1]||(o[1]=m=>l.new=m),placeholder:"••••••••",type:"password",class:"input"},null,512),[[P,l.new,void 0,{trim:!0}]]),e("p",K,$((n=r(f))==null?void 0:n.new),1)]),e("div",O,[Q,y(e("input",{id:"verify_new_pass","onUpdate:modelValue":o[2]||(o[2]=m=>l.verify=m),placeholder:"••••••••",type:"password",class:"input"},null,512),[[P,l.verify,void 0,{trim:!0}]]),e("p",W,$((c=r(f))==null?void 0:c.verify),1)]),e("div",X,[e("button",{class:"btn-main disabled-btn-main",disabled:!s.value,onClick:o[3]||(o[3]=m=>a())}," Change ",8,Z)])])}}}),se={class:"flex justify-center items-center bg-zinc-700 rounded-md relative h-[21vh]"},te=["src"],le=C({__name:"UploadImgProfile",props:{clean:Boolean,preview:{type:String,default:""}},emits:{update:h=>h},setup(h,{emit:d}){const i=h,_=d,l=U(""),s=U(new Blob),v=()=>{var u;(u=document.getElementById("profile_img_upl"))==null||u.click()},f=()=>{s.value=new Blob,_("update",s.value),l.value=i.preview},w=u=>{let a=u.target;if(a.files){let p=new FileReader;p.onload=o=>{var t;l.value=String((t=o.target)==null?void 0:t.result)},a.files[0]&&(p.readAsDataURL(a.files[0]),s.value=a.files[0],_("update",s.value))}};return B(()=>i.clean==!0&&f()),B(()=>setTimeout(()=>l.value=i.preview,300)),(u,a)=>(g(),x(A,null,[e("input",{id:"profile_img_upl",accept:".png, .jpeg, .webp, .jpg, tif, bmp, gif",class:"hidden",type:"file",onChange:w},null,32),e("div",se,[l.value?(g(),x("img",{key:0,src:l.value,class:"image-profile",onClick:a[0]||(a[0]=p=>v())},null,8,te)):(g(),j(r(E).Loading,{key:1})),y(k(r(E).Close,{class:"btn-cancel-img-profile",onClick:a[1]||(a[1]=p=>f())},null,512),[[z,s.value.size]])])],64))}});const ne={class:"content-profile"},oe=e("h1",{class:"font-bold text-xl mb-2"},"Change data user",-1),ae={class:"box-field"},ie={class:"box-field"},re=e("label",{for:"fullname"},"Full name",-1),de={class:"input-error"},ce={class:"box-field"},ue=e("label",{for:"email"},"Email",-1),pe={class:"input-error"},me={class:"box-field mt-3"},fe=["disabled"],_e=C({__name:"FormProfileUser",setup(h){const d=M(),{user:i,update:_}=F(),l="http://localhost:9600/upload/profile",s=S({...i.value,file:new Blob}),v=U(!1),f=V(()=>{var t,n;return!!(w()&&((t=s.fullname)!=null&&t.length)&&((n=s.email)!=null&&n.length))}),w=()=>{var t,n;return s.email!=((t=i.value)==null?void 0:t.email)||s.fullname!=((n=i.value)==null?void 0:n.fullname)||s.file.size},{check:u,errors:a,inputError:p}=I({fullname:["empty","min:4"],email:["empty","email"]}),o=()=>{const t=w(),n=u({fullname:String(s.fullname),email:String(s.email)});t&&n.value&&_(s,{actions:()=>{d.success("updated success"),v.value=!0,setTimeout(()=>v.value=!1,300)},error:c=>d.error(c.message)})};return B(()=>{var t,n,c;s.email=(t=i.value)==null?void 0:t.email,s.fullname=(n=i.value)==null?void 0:n.fullname,s.image=(c=i.value)==null?void 0:c.image}),(t,n)=>{var c,m;return g(),x("div",ne,[oe,e("div",ae,[k(le,{clean:v.value,preview:`${r(l)}/${s.image}`,onUpdate:n[0]||(n[0]=b=>s.file=b)},null,8,["clean","preview"])]),e("div",ie,[re,y(e("input",{id:"fullname","onUpdate:modelValue":n[1]||(n[1]=b=>s.fullname=b),class:N(["input",r(p)("fullname")])},null,2),[[P,s.fullname,void 0,{trim:!0}]]),e("p",de,$((c=r(a))==null?void 0:c.fullname),1)]),e("div",ce,[ue,y(e("input",{id:"email","onUpdate:modelValue":n[2]||(n[2]=b=>s.email=b),class:N(["input",r(p)("email")])},null,2),[[P,s.email,void 0,{trim:!0}]]),e("p",pe,$((m=r(a))==null?void 0:m.email),1)]),e("div",me,[e("button",{class:"btn-main disabled-btn-main",disabled:!f.value,onClick:n[3]||(n[3]=b=>o())}," Update ",8,fe)])])}}}),ve={class:"flex justify-center pt-20"},ge={key:0,class:"absolute top-16 right-5 text-sm"},he={class:"grid md:grid-cols-2 gap-10"},we="dddd DD, MMMM MM, YYYY - h:m A",ye=C({__name:"ProfilePage",setup(h){const{user:d}=F();return(i,_)=>(g(),x("div",ve,[r(d)?(g(),x("span",ge,"Created: "+$(r(T)(r(d).createdAt).format(we)),1)):D("",!0),e("div",he,[k(_e),k(ee)])]))}});export{ye as default};
